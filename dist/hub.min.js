var CrossStorageHub={};CrossStorageHub.init=function(e){window.localStorage&&(CrossStorageHub._originPattern=e,CrossStorageHub._installListener(),window.parent.postMessage("ready","*"))},CrossStorageHub._installListener=function(){var e=CrossStorageHub._listener;window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent("onmessage",e)},CrossStorageHub._listener=function(e){var t,r,o,s,n;if(CrossStorageHub._originPattern.test(e.origin)&&(t=["get","set","del"],r=JSON.parse(e.data),-1!==t.indexOf(r.method))){try{s=CrossStorageHub["_"+r.method](r.params)}catch(a){o=a.message}n=JSON.stringify({id:r.id,error:o,result:s}),window.parent.postMessage(n,e.origin)}},CrossStorageHub._set=function(e){var t,r;if(t=e.ttl,t&&parseInt(t,10)!==t)throw new Error("ttl must be a number");r={value:e.value},t&&(r.expire=Date.now()+t),window.localStorage.setItem(e.key,JSON.stringify(r))},CrossStorageHub._get=function(e){var t,r,o,s,n;for(t=window.localStorage,r=[],o=0;o<e.keys.length;o++)n=e.keys[o],s=JSON.parse(t.getItem(n)),null===s?r.push(null):s.expire&&s.expire<Date.now()?(t.removeItem(n),r.push(null)):r.push(s.value);return r.length>1?r:r[0]},CrossStorageHub._del=function(e){for(var t=0;t<e.keys.length;t++)window.localStorage.removeItem(e.keys[t])};